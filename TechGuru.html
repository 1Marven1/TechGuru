<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>TechGuru - –ú–∞–≥–∞–∑–∏–Ω —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/vuex@4"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background-color: #f5f7fa; }
    .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
    header { background: #35495e; color: white; padding: 15px 0; margin-bottom: 30px; }
    nav { display: flex; justify-content: space-between; align-items: center; }
    .cart-btn { position: relative; background: #41b883; border: none; color: white; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
    .cart-count { position: absolute; top: -8px; right: -8px; background: #ff5722; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; }
    .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
    .product-card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s; }
    .product-card:hover { transform: translateY(-5px); }
    .product-image { height: 160px; background: #eee; display: flex; align-items: center; justify-content: center; }
    .product-image img { max-width: 100%; max-height: 100%; object-fit: contain; }
    .product-info { padding: 15px; }
    .product-title { font-weight: 600; margin: 0 0 10px; }
    .product-price { color: #41b883; font-weight: 700; margin: 10px 0; }
    .add-to-cart { width: 100%; background: #41b883; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; }
    .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
    .modal-content { background: white; width: 80%; max-width: 600px; max-height: 80vh; border-radius: 8px; padding: 20px; overflow-y: auto; }
    .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
    .cart-item-actions button { background: #ff5722; color: white; border: none; width: 25px; height: 25px; border-radius: 50%; cursor: pointer; }
    .checkout-btn { background: #41b883; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin-top: 20px; cursor: pointer; width: 100%; }
    .notification { position: fixed; top: 20px; right: 20px; background: #41b883; color: white; padding: 10px 15px; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 1001; }
    .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
    .form-group input, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
    .form-actions { display: flex; justify-content: space-between; margin-top: 20px; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .category-title { grid-column: 1 / -1; font-size: 1.5em; margin: 30px 0 15px; padding-bottom: 10px; border-bottom: 2px solid #41b883; }
    
    /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π */
    .search-filter-container { display: flex; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
    .search-box { flex-grow: 1; min-width: 300px; padding: 8px 15px; border: 1px solid #ddd; border-radius: 4px; }
    .filter-section { background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .filter-title { margin-top: 0; margin-bottom: 10px; }
    .filter-options { display: flex; gap: 15px; flex-wrap: wrap; }
    .filter-option { display: flex; align-items: center; gap: 5px; }
    .price-range { display: flex; gap: 10px; align-items: center; }
    .price-range input { width: 80px; padding: 5px; }
    .pagination { display: flex; justify-content: center; gap: 5px; margin-top: 20px; }
    .pagination button { padding: 5px 10px; border: 1px solid #ddd; background: white; cursor: pointer; border-radius: 4px; }
    .pagination button.active { background: #41b883; color: white; border-color: #41b883; }
    .no-results { text-align: center; padding: 30px; font-size: 1.2em; color: #666; }
  </style>
</head>
<body>
  <div id="app">
    <header>
      <div class="container">
        <nav>
          <h1>TechGuru - –ú–∞–≥–∞–∑–∏–Ω —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏</h1>
          <button class="cart-btn" @click="showCart = true">
            –ö–æ—Ä–∑–∏–Ω–∞
            <span class="cart-count" v-if="cartItemCount">{{ cartItemCount }}</span>
          </button>
        </nav>
      </div>
    </header>

    <div class="container">
      <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
      <div class="search-filter-container">
        <input 
          type="text" 
          class="search-box" 
          placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." 
          v-model="searchQuery"
          @input="resetPagination"
        >
        
        <div class="filter-options">
          <div class="filter-option">
            <label for="sort">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
            <select id="sort" v-model="sortOption" @change="resetPagination">
              <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
              <option value="price-asc">–¶–µ–Ω–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
              <option value="price-desc">–¶–µ–Ω–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é</option>
              <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ (–ê-–Ø)</option>
              <option value="name-desc">–ù–∞–∑–≤–∞–Ω–∏–µ (–Ø-–ê)</option>
            </select>
          </div>
        </div>
      </div>
      
      <!-- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ -->
      <div class="filter-section">
        <h3 class="filter-title">–§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ</h3>
        <div class="price-range">
          <input type="number" v-model="priceRange.min" placeholder="–û—Ç" @change="resetPagination">
          <span>-</span>
          <input type="number" v-model="priceRange.max" placeholder="–î–æ" @change="resetPagination">
          <span>—Ä—É–±.</span>
        </div>
      </div>

      <div v-if="loading" style="text-align: center; padding: 50px;">
        <div class="loading"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</p>
      </div>

      <div v-else>
        <!-- –ù–æ—É—Ç–±—É–∫–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã -->
        <h2 class="category-title">–ù–æ—É—Ç–±—É–∫–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã</h2>
        <div v-if="getProductsByCategory('laptops').length > 0">
          <div class="products-grid">
            <div 
              class="product-card" 
              v-for="product in getPaginatedProducts('laptops')" 
              :key="product.id"
            >
              <div class="product-image">
                <img :src="product.image || 'https://via.placeholder.com/250x160?text=No+Image'" :alt="product.title">
              </div>
              <div class="product-info">
                <h3 class="product-title">{{ product.title }}</h3>
                <p>{{ product.description }}</p>
                <p class="product-price">{{ product.price.toLocaleString() }} —Ä—É–±.</p>
                <button class="add-to-cart" @click="addToCart(product)">
                  –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                </button>
              </div>
            </div>
          </div>
          
          <div class="pagination" v-if="getProductsByCategory('laptops').length > itemsPerPage">
            <button 
              v-for="page in getPageCount('laptops')" 
              :key="page"
              @click="setCurrentPage('laptops', page)"
              :class="{ active: currentPages.laptops === page }"
            >
              {{ page }}
            </button>
          </div>
        </div>
        <div v-else class="no-results">
          –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
        </div>

        <!-- –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã –∏ –≥–∞–¥–∂–µ—Ç—ã -->
        <h2 class="category-title">–°–º–∞—Ä—Ç—Ñ–æ–Ω—ã –∏ –≥–∞–¥–∂–µ—Ç—ã</h2>
        <div v-if="getProductsByCategory('smartphones').length > 0">
          <div class="products-grid">
            <div 
              class="product-card" 
              v-for="product in getPaginatedProducts('smartphones')" 
              :key="product.id"
            >
              <div class="product-image">
                <img :src="product.image || 'https://via.placeholder.com/250x160?text=No+Image'" :alt="product.title">
              </div>
              <div class="product-info">
                <h3 class="product-title">{{ product.title }}</h3>
                <p>{{ product.description }}</p>
                <p class="product-price">{{ product.price.toLocaleString() }} —Ä—É–±.</p>
                <button class="add-to-cart" @click="addToCart(product)">
                  –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                </button>
              </div>
            </div>
          </div>
          
          <div class="pagination" v-if="getProductsByCategory('smartphones').length > itemsPerPage">
            <button 
              v-for="page in getPageCount('smartphones')" 
              :key="page"
              @click="setCurrentPage('smartphones', page)"
              :class="{ active: currentPages.smartphones === page }"
            >
              {{ page }}
            </button>
          </div>
        </div>
        <div v-else class="no-results">
          –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
        </div>

        <!-- –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã -->
        <h2 class="category-title">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</h2>
        <div v-if="getProductsByCategory('accessories').length > 0">
          <div class="products-grid">
            <div 
              class="product-card" 
              v-for="product in getPaginatedProducts('accessories')" 
              :key="product.id"
            >
              <div class="product-image">
                <img :src="product.image || 'https://via.placeholder.com/250x160?text=No+Image'" :alt="product.title">
              </div>
              <div class="product-info">
                <h3 class="product-title">{{ product.title }}</h3>
                <p>{{ product.description }}</p>
                <p class="product-price">{{ product.price.toLocaleString() }} —Ä—É–±.</p>
                <button class="add-to-cart" @click="addToCart(product)">
                  –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
                </button>
              </div>
            </div>
          </div>
          
          <div class="pagination" v-if="getProductsByCategory('accessories').length > itemsPerPage">
            <button 
              v-for="page in getPageCount('accessories')" 
              :key="page"
              @click="setCurrentPage('accessories', page)"
              :class="{ active: currentPages.accessories === page }"
            >
              {{ page }}
            </button>
          </div>
        </div>
        <div v-else class="no-results">
          –¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div class="modal" v-if="showCart" @click.self="showCart = false">
      <div class="modal-content">
        <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
        
        <div v-if="cart.length === 0">
          <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
        </div>
        
        <div v-else>
          <div class="cart-item" v-for="item in cart" :key="item.product.id">
            <div>{{ item.product.title }}</div>
            <div>
              {{ item.product.price.toLocaleString() }} —Ä—É–±. √ó {{ item.quantity }} = {{ (item.product.price * item.quantity).toLocaleString() }} —Ä—É–±.
            </div>
            <div class="cart-item-actions">
              <button @click="updateCartItem({ product: item.product, quantity: item.quantity - 1 })">-</button>
              <span style="margin: 0 10px;">{{ item.quantity }}</span>
              <button @click="updateCartItem({ product: item.product, quantity: item.quantity + 1 })">+</button>
              <button @click="removeFromCart(item.product)" style="margin-left: 10px;">üóëÔ∏è</button>
            </div>
          </div>
          
          <div style="text-align: right; margin-top: 20px; font-weight: bold;">
            –ò—Ç–æ–≥–æ: {{ cartTotal.toLocaleString() }} —Ä—É–±.
          </div>
          
          <button class="checkout-btn" @click="startCheckout">
            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
          </button>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div class="modal" v-if="showCheckoutForm" @click.self="showCheckoutForm = false">
      <div class="modal-content">
        <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        
        <form @submit.prevent="submitOrder">
          <div class="form-group">
            <label for="name">–§–ò–û:</label>
            <input id="name" type="text" v-model="orderForm.name" required>
          </div>
          
          <div class="form-group">
            <label for="email">Email:</label>
            <input id="email" type="email" v-model="orderForm.email" required>
          </div>
          
          <div class="form-group">
            <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
            <input id="phone" type="tel" v-model="orderForm.phone" required>
          </div>
          
          <div class="form-group">
            <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
            <textarea id="address" v-model="orderForm.address" required></textarea>
          </div>
          
          <div class="form-group">
            <label for="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É:</label>
            <textarea id="comment" v-model="orderForm.comment"></textarea>
          </div>
          
          <div class="form-actions">
            <button type="button" @click="showCheckoutForm = false" style="background: #ccc;">–ù–∞–∑–∞–¥</button>
            <button type="submit" class="checkout-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
          </div>
        </form>
      </div>
    </div>

    <div class="notification" v-if="notification.show" @click="hideNotification">
      {{ notification.message }}
    </div>
  </div>

  <script>
    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π mockApi —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ localStorage
    const mockApi = {
      cacheKey: 'techguru_products_cache',
      cacheExpiry: 30 * 60 * 1000, // 30 –º–∏–Ω—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
      
      async fetchProducts() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à –≤ localStorage
        const cachedData = this.getCachedData();
        if (cachedData) {
          console.log('–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ');
          return cachedData;
        }
        
        // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –∫ API
        return new Promise(resolve => {
          setTimeout(() => {
            const products = [
              // –ù–æ—É—Ç–±—É–∫–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã
              { 
                id: 1, 
                title: '–ù–æ—É—Ç–±—É–∫ ASUS ROG Strix G15', 
                description: '–ò–≥—Ä–æ–≤–æ–π –Ω–æ—É—Ç–±—É–∫, 15.6", Ryzen 7, RTX 3060', 
                price: 89990, 
                category: 'laptops',
                image: 'https://via.placeholder.com/250x160?text=ASUS+ROG' 
              },
              { 
                id: 2, 
                title: 'MacBook Air M1', 
                description: '13.3", Apple M1, 8GB, 256GB SSD', 
                price: 79990, 
                category: 'laptops',
                image: 'https://via.placeholder.com/250x160?text=MacBook+Air'
              },
              { 
                id: 3, 
                title: '–ò–≥—Ä–æ–≤–æ–π –ü–ö HP Omen', 
                description: 'Intel i7, RTX 3070, 16GB RAM, 1TB SSD', 
                price: 129990, 
                category: 'laptops',
                image: 'https://via.placeholder.com/250x160?text=HP+Omen'
              },
              { 
                id: 4, 
                title: '–ù–æ—É—Ç–±—É–∫ Lenovo IdeaPad 5', 
                description: '14", Ryzen 5, 16GB RAM, 512GB SSD', 
                price: 54990, 
                category: 'laptops',
                image: 'https://via.placeholder.com/250x160?text=Lenovo+IdeaPad'
              },
              { 
                id: 5, 
                title: '–ú–æ–Ω–æ–±–ª–æ–∫ Apple iMac 24"', 
                description: 'M1, 8GB, 256GB SSD, 4.5K –¥–∏—Å–ø–ª–µ–π', 
                price: 109990, 
                category: 'laptops',
                image: 'https://via.placeholder.com/250x160?text=iMac+24'
              },
              
              // –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã –∏ –≥–∞–¥–∂–µ—Ç—ã
              { 
                id: 6, 
                title: 'iPhone 14 Pro', 
                description: '6.1", 128GB, –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —á–µ—Ä–Ω—ã–π', 
                price: 99990, 
                category: 'smartphones',
                image: 'https://via.placeholder.com/250x160?text=iPhone+14+Pro'
              },
              { 
                id: 7, 
                title: 'Samsung Galaxy S23 Ultra', 
                description: '6.8", 256GB, S Pen, 200MP –∫–∞–º–µ—Ä–∞', 
                price: 89990, 
                category: 'smartphones',
                image: 'https://via.placeholder.com/250x160?text=Galaxy+S23'
              },
              { 
                id: 8, 
                title: 'Xiaomi Redmi Note 12 Pro', 
                description: '6.67", 128GB, AMOLED, 108MP', 
                price: 24990, 
                category: 'smartphones',
                image: 'https://via.placeholder.com/250x160?text=Redmi+Note+12'
              },
              { 
                id: 9, 
                title: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞ PocketBook 740', 
                description: '7.8", 32GB, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ', 
                price: 19990, 
                category: 'smartphones',
                image: 'https://via.placeholder.com/250x160?text=PocketBook+740'
              },
              { 
                id: 10, 
                title: '–£–º–Ω—ã–µ —á–∞—Å—ã Apple Watch Series 8', 
                description: '45mm, GPS, —ç–∫—Ä–∞–Ω Always-On', 
                price: 34990, 
                category: 'smartphones',
                image: 'https://via.placeholder.com/250x160?text=Apple+Watch+8'
              },
              
              // –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã
              { 
                id: 11, 
                title: '–ù–∞—É—à–Ω–∏–∫–∏ Sony WH-1000XM5', 
                description: '–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ —Å —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ–º', 
                price: 29990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Sony+WH-1000XM5'
              },
              { 
                id: 12, 
                title: '–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Logitech MX Keys', 
                description: '–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è, –ø–æ–¥—Å–≤–µ—Ç–∫–∞, –¥–ª—è Mac/Windows', 
                price: 8990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Logitech+MX+Keys'
              },
              { 
                id: 13, 
                title: '–í–Ω–µ—à–Ω–∏–π SSD Samsung T7', 
                description: '1TB, USB 3.2, —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ 1050MB/s', 
                price: 8990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Samsung+T7'
              },
              { 
                id: 14, 
                title: '–î–æ–∫-—Å—Ç–∞–Ω—Ü–∏—è Dell WD19', 
                description: '130W, 4K, Ethernet, USB-C', 
                price: 14990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Dell+WD19'
              },
              { 
                id: 15, 
                title: '–†–æ—É—Ç–µ—Ä ASUS RT-AX82U', 
                description: 'Wi-Fi 6, 5400 –ú–±–∏—Ç/—Å, –∏–≥—Ä–æ–≤–æ–π —Ä–µ–∂–∏–º', 
                price: 12990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=ASUS+RT-AX82U'
              },
              { 
                id: 16, 
                title: 'Power Bank Xiaomi 20000 mAh', 
                description: '–ë—ã—Å—Ç—Ä–∞—è –∑–∞—Ä—è–¥–∫–∞ 18W, –¥–≤–∞ USB', 
                price: 2990, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Xiaomi+Power+Bank'
              },
              { 
                id: 17, 
                title: '–ö–∞–±–µ–ª—å USB-C Thunderbolt 4', 
                description: '1–º, 40Gbps, 100W', 
                price: 2490, 
                category: 'accessories',
                image: 'https://via.placeholder.com/250x160?text=Thunderbolt+4'
              }
            ];
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
            this.cacheData(products);
            
            resolve(products);
          }, 1000);
        });
      },
      
      getCachedData() {
        const cached = localStorage.getItem(this.cacheKey);
        if (!cached) return null;
        
        const { data, timestamp } = JSON.parse(cached);
        const now = Date.now();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —É—Å—Ç–∞—Ä–µ–ª–∏ –ª–∏ –¥–∞–Ω–Ω—ã–µ
        if (now - timestamp > this.cacheExpiry) {
          localStorage.removeItem(this.cacheKey);
          return null;
        }
        
        return data;
      },
      
      cacheData(data) {
        const cache = {
          data,
          timestamp: Date.now()
        };
        localStorage.setItem(this.cacheKey, JSON.stringify(cache));
      },
      
      clearCache() {
        localStorage.removeItem(this.cacheKey);
      },
      
      checkout: (orderData) => {
        // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–µ –∫—ç—à–∏—Ä—É–µ–º
        return new Promise(resolve => {
          setTimeout(() => {
            console.log('–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω:', orderData);
            resolve({ 
              success: true, 
              orderId: Math.floor(Math.random() * 1000000),
              deliveryDate: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toLocaleDateString()
            });
          }, 1500);
        });
      }
    };

    // –°–æ–∑–¥–∞—ë–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Vuex
    const store = Vuex.createStore({
      state: {
        products: [],
        loading: false,
        cart: [],
        notification: { show: false, message: '' },
        lastFetchTime: null
      },
      mutations: {
        SET_PRODUCTS(state, products) {
          state.products = products;
          state.lastFetchTime = Date.now();
        },
        SET_LOADING(state, isLoading) {
          state.loading = isLoading;
        },
        ADD_TO_CART(state, { product, quantity = 1 }) {
          const existingItem = state.cart.find(item => item.product.id === product.id);
          if (existingItem) {
            existingItem.quantity += quantity;
          } else {
            state.cart.push({ product, quantity });
          }
        },
        UPDATE_CART_ITEM(state, { product, quantity }) {
          const item = state.cart.find(item => item.product.id === product.id);
          if (item) {
            if (quantity <= 0) {
              state.cart = state.cart.filter(item => item.product.id !== product.id);
            } else {
              item.quantity = quantity;
            }
          }
        },
        REMOVE_FROM_CART(state, product) {
          state.cart = state.cart.filter(item => item.product.id !== product.id);
        },
        CLEAR_CART(state) {
          state.cart = [];
        },
        SHOW_NOTIFICATION(state, message) {
          state.notification = { show: true, message };
          setTimeout(() => {
            state.notification.show = false;
          }, 3000);
        },
        HIDE_NOTIFICATION(state) {
          state.notification.show = false;
        }
      },
      actions: {
        async fetchProducts({ commit, state }) {
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ
          const now = Date.now();
          const cacheValid = state.lastFetchTime && 
                           (now - state.lastFetchTime) < mockApi.cacheExpiry;
          
          if (cacheValid && state.products.length > 0) {
            console.log('–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è');
            return;
          }
          
          commit('SET_LOADING', true);
          try {
            const products = await mockApi.fetchProducts();
            commit('SET_PRODUCTS', products);
          } catch (error) {
            commit('SHOW_NOTIFICATION', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤');
            console.error(error);
          } finally {
            commit('SET_LOADING', false);
          }
        },
        addToCart({ commit }, product) {
          commit('ADD_TO_CART', { product });
          commit('SHOW_NOTIFICATION', `${product.title} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É`);
        },
        updateCartItem({ commit }, { product, quantity }) {
          commit('UPDATE_CART_ITEM', { product, quantity });
        },
        removeFromCart({ commit }, product) {
          commit('REMOVE_FROM_CART', product);
          commit('SHOW_NOTIFICATION', `${product.title} —É–¥–∞–ª—ë–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã`);
        },
        async checkout({ commit, state }, orderData) {
          commit('SET_LOADING', true);
          try {
            const response = await mockApi.checkout({
              ...orderData,
              products: state.cart,
              total: state.cart.reduce((total, item) => total + (item.product.price * item.quantity), 0)
            });
            
            if (response.success) {
              commit('SHOW_NOTIFICATION', `–ó–∞–∫–∞–∑ #${response.orderId} –æ—Ñ–æ—Ä–º–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ! –î–æ—Å—Ç–∞–≤–∫–∞ ${response.deliveryDate}`);
              commit('CLEAR_CART');
              return true;
            }
          } catch (error) {
            commit('SHOW_NOTIFICATION', '–û—à–∏–±–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞');
            console.error(error);
            return false;
          } finally {
            commit('SET_LOADING', false);
          }
        }
      },
      getters: {
        cartItemCount: state => state.cart.reduce((count, item) => count + item.quantity, 0),
        cartTotal: state => state.cart.reduce((total, item) => total + (item.product.price * item.quantity), 0),
        isProductInCart: state => product => state.cart.some(item => item.product.id === product.id),
        laptops: state => state.products.filter(p => p.category === 'laptops'),
        smartphones: state => state.products.filter(p => p.category === 'smartphones'),
        accessories: state => state.products.filter(p => p.category === 'accessories')
      }
    });

    // –°–æ–∑–¥–∞—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Vue
    const app = Vue.createApp({
      data() {
        return {
          showCart: false,
          showCheckoutForm: false,
          orderForm: {
            name: '',
            email: '',
            phone: '',
            address: '',
            comment: ''
          },
          searchQuery: '',
          sortOption: 'default',
          priceRange: {
            min: null,
            max: null
          },
          itemsPerPage: 6,
          currentPages: {
            laptops: 1,
            smartphones: 1,
            accessories: 1
          }
        };
      },
      computed: {
        ...Vuex.mapState(['products', 'loading', 'cart', 'notification']),
        ...Vuex.mapGetters(['cartItemCount', 'cartTotal', 'laptops', 'smartphones', 'accessories']),
      },
      methods: {
        ...Vuex.mapActions(['fetchProducts', 'addToCart', 'updateCartItem', 'removeFromCart', 'checkout']),
        hideNotification() {
          this.$store.commit('HIDE_NOTIFICATION');
        },
        startCheckout() {
          this.showCart = false;
          this.showCheckoutForm = true;
        },
        async submitOrder() {
          const success = await this.checkout(this.orderForm);
          if (success) {
            this.showCheckoutForm = false;
            this.orderForm = {
              name: '',
              email: '',
              phone: '',
              address: '',
              comment: ''
            };
          }
        },
        
        getProductsByCategory(category) {
          let products = this[category] || [];
          
          if (this.searchQuery) {
            const query = this.searchQuery.toLowerCase();
            products = products.filter(p => 
              p.title.toLowerCase().includes(query) || 
              p.description.toLowerCase().includes(query)
            );
          }
          
          if (this.priceRange.min) {
            products = products.filter(p => p.price >= this.priceRange.min);
          }
          if (this.priceRange.max) {
            products = products.filter(p => p.price <= this.priceRange.max);
          }
          
          switch (this.sortOption) {
            case 'price-asc':
              return [...products].sort((a, b) => a.price - b.price);
            case 'price-desc':
              return [...products].sort((a, b) => b.price - a.price);
            case 'name-asc':
              return [...products].sort((a, b) => a.title.localeCompare(b.title));
            case 'name-desc':
              return [...products].sort((a, b) => b.title.localeCompare(a.title));
            default:
              return products;
          }
        },
        
        getPaginatedProducts(category) {
          const products = this.getProductsByCategory(category);
          const start = (this.currentPages[category] - 1) * this.itemsPerPage;
          const end = start + this.itemsPerPage;
          return products.slice(start, end);
        },
        
        getPageCount(category) {
          const products = this.getProductsByCategory(category);
          return Math.ceil(products.length / this.itemsPerPage);
        },
        
        setCurrentPage(category, page) {
          this.currentPages = { ...this.currentPages, [category]: page };
          window.scrollTo({ top: 0, behavior: 'smooth' });
        },
        
        resetPagination() {
          this.currentPages = {
            laptops: 1,
            smartphones: 1,
            accessories: 1
          };
        }
      },
      created() {
        this.fetchProducts();
      }
    });

    // –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
    app.use(store);

    // –ú–æ–Ω—Ç–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    app.mount('#app');
  </script>
</body>
</html>